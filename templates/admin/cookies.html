
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Consent - Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
    <div class="admin-container">
        <nav class="admin-nav">
            <div class="nav-brand">
                <h2>Tirana Walk Tour</h2>
                <span>Admin Dashboard</span>
            </div>
            <div class="nav-links">
                <a href="{{ url_for('admin_dashboard') }}" class="nav-link">Dashboard</a>
                <a href="{{ url_for('admin_tours') }}" class="nav-link">Tours</a>
                <a href="{{ url_for('admin_bookings') }}" class="nav-link">Bookings</a>
                <a href="{{ url_for('admin_cookies') }}" class="nav-link active">Cookies</a>
                <a href="{{ url_for('admin_logout') }}" class="nav-link logout">Logout</a>
            </div>
        </nav>
        
        <main class="admin-main">
            <div class="page-header">
                <h1>Cookie Consent Information</h1>
            </div>
            
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-success">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">{{ cookie_stats.total }}</div>
                    <div class="stat-label">Total Responses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #34c759;">{{ cookie_stats.accepted }}</div>
                    <div class="stat-label">Accepted</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: #ff3b30;">{{ cookie_stats.declined }}</div>
                    <div class="stat-label">Declined</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ cookie_stats.acceptance_rate }}%</div>
                    <div class="stat-label">Acceptance Rate</div>
                </div>
            </div>
            
            <div class="cookie-records">
                <h2>Recent Cookie Consent Records</h2>
                {% if cookie_records %}
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Timestamp</th>
                                    <th>Status</th>
                                    <th>IP Address</th>
                                    <th>User Agent</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for record in cookie_records %}
                                <tr>
                                    <td>{{ record.timestamp }}</td>
                                    <td>
                                        <span class="status-badge status-{{ record.status }}">
                                            {{ record.status|upper }}
                                        </span>
                                    </td>
                                    <td>{{ record.ip_address }}</td>
                                    <td class="user-agent">{{ record.user_agent[:60] }}...</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <p>No cookie consent records yet.</p>
                {% endif %}
            </div>
        </main>
    </div>
    
    <style>
        .cookie-records {
            margin-top: 2rem;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .cookie-records h2 {
            margin-bottom: 1.5rem;
            color: #1d1d1f;
        }
        
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .status-accepted {
            background: #d1f4e0;
            color: #0f5132;
        }
        
        .status-declined {
            background: #f8d7da;
            color: #842029;
        }
        
        .user-agent {
            font-size: 0.875rem;
            color: #6e6e73;
            max-width: 400px;
        }
    </style>
</body>
</html>
